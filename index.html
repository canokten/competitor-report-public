<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Competitor Report â€” Public</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body { margin:0; font-family:sans-serif; background:#0b1020; color:#e6ecff; }
    .wrap { max-width:1100px; margin:0 auto; padding:24px; }
    h1 { margin-bottom:12px; }
    .card { background:#121a35; border-radius:12px; padding:12px; margin-bottom:16px; }
    .frame { width:100%; height:480px; border-radius:8px; background:#0f152e; }
    .small { font-size:12px; color:#9fb3ff; }
  </style>
</head>
<body>
  <div class="wrap">
    <h1 id="title">Report</h1>
    <p id="subtitle" class="small"></p>

    <div id="dashboards"></div>
  </div>

  <script type="module">
    const TOKEN_ENDPOINT = 'https://dbx-token-service.vercel.app/api/databricks-token';

    const cfg = await (await fetch("./config.json", {cache:"no-store"})).json();
    document.getElementById("title").textContent = cfg.meta.title;
    document.getElementById("subtitle").textContent = cfg.meta.subtitle;

    const dashWrap = document.getElementById("dashboards");
    const { DatabricksDashboard } = await import(
      "https://cdn.jsdelivr.net/npm/@databricks/aibi-client@0.0.0-alpha.7/+esm"
    );

    async function renderDash(d) {
      const box = document.createElement("div");
      box.className = "card";
      box.innerHTML = `<h3>${d.title}</h3><div id="c_${d.id}" class="frame"></div>`;
      dashWrap.appendChild(box);

      try {
        const u = new URL(TOKEN_ENDPOINT);
        u.searchParams.set("d
